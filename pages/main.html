<html>
<head>


</head>


<body>
<div id="ONE" style="position: absolute; left: 100px; top: 305px; width: 600px; height: 360px; background: #ffc978; border-width:3px; border-color: #ffb94f; border-style: solid;"></div>
<div id="TWO" style="position: absolute; left: 10px; top: 105px; width: 36px; height: 60px; background: #ffc978; border-width:3px; border-color: #ffb94f; border-style: solid;"></div> 

<button style="position: absolute; left: 60px; top: 0px; width: 360px; height: 190px;" onmouseup="HEROmove(5)"></button>

<button style="position: absolute; left: 100px; top: 60px; width: 80px; height: 80px;" onmouseup="HEROmove(5)" onmousedown="HEROmove(3)">D</button>

<button style="position: absolute; left: 300px; top: 60px; width: 80px; height: 80px;" onmouseup="HEROmove(5)" onmousedown="HEROmove(4)">A</button>

<button style="position: absolute; left: 200px; top: 90px; width: 80px; height: 80px;" onmouseup="HEROmove(5)" onmousedown="HEROmove(2)">S</button>

<button style="position: absolute; left: 200px; top: 0px; width: 80px; height: 80px;" onmouseup="HEROmove(5)" onmousedown="HEROmove(1)">W</button>






<script>






    function HitboxLogicCreator(WALL,HERO,ACTIONTYPE,DEBUG){
    
    var DATA;
    
    //Получаем Мин-Мах ширину объекта(Стена)

    //Ширина
    DATA = document.getElementById(WALL).style.left;
    var WALLleft = parseInt(DATA);

    DATA = document.getElementById(WALL).style.width;
    var WALLwidth = parseInt(DATA);

    //Высота
    DATA = document.getElementById(WALL).style.top;
    var WALLtop = parseInt(DATA);

    DATA = document.getElementById(WALL).style.height;
    var WALLheight = parseInt(DATA);

    //Итоговые данные
    var WALLminW = WALLleft;
    var WALLmaxW = WALLleft + WALLwidth;

    var WALLminH = WALLtop;
    var WALLmaxH = WALLtop + WALLheight;

    if(DEBUG == 1){
    console.log("Данные стены : X1= " + WALLminW + " X2= " + WALLmaxW + " Y1= " + WALLminH + " Y2= " + WALLmaxH);
    }

    //Получаем Мин-Мах ширину объекта(Герой)

    //Ширина
    DATA = document.getElementById(HERO).style.left;
    var HEROleft = parseInt(DATA);

    DATA = document.getElementById(HERO).style.width;
    var HEROwidth = parseInt(DATA);

    //Высота
    DATA = document.getElementById(HERO).style.top;
    var HEROtop = parseInt(DATA);

    DATA = document.getElementById(HERO).style.height;
    var HEROheight = parseInt(DATA);

    //Итоговые данные
    var HEROminW = HEROleft;
    var HEROmaxW = HEROleft + HEROwidth;

    var HEROminH = HEROtop;
    var HEROmaxH = HEROtop + HEROheight;

    if(DEBUG == 1){
    console.log("Данные персонажа : X1= " + HEROminW + " X2= " + HEROmaxW + " Y1= " + HEROminH + " Y2= " + HEROmaxH);
    }

    /*
    Итого имеем :
    WALLminW WALLmaxW
    WALLminH WALLmaxH

    HEROminW HEROmaxW
    HEROminH HEROmaxH
    */


      
            var xOne = 0;

            var WALLarrayW = [];
            var WALLarrayH = [];

            var end = false;
            while(end == false){

            if(WALLminW + xOne <= WALLmaxW){
            WALLarrayW[xOne] = WALLminW + xOne;
            xOne = xOne + 1;
            
            } else {
                end = true;
            }
        
            }
            


            end = false;
            xOne = 0;

            while(end == false){
            
            if(WALLminH + xOne <= WALLmaxH){
            WALLarrayH[xOne] = WALLminH + xOne;
            xOne = xOne + 1;
            } else {
                end = true;
            }
            }
            
            if(DEBUG == 1){
            console.log("");
            console.log("Массив ширины объекта : " + WALLarrayW);
            console.log("Массив высоты объекта : " + WALLarrayH);
            }



            var HEROarrayW = [];
            var HEROarrayH = [];

            end = false;
            xOne = 0;

            while(end == false){
            
            if(HEROminW + xOne <= HEROmaxW){
            HEROarrayW[xOne] = HEROminW + xOne;
            xOne = xOne + 1;
            } else {
                end = true;
            }
            }
            
            end = false;
            xOne = 0;

            while(end == false){
            
            if(HEROminH + xOne <= HEROmaxH){
            HEROarrayH[xOne] = HEROminH + xOne;
            xOne = xOne + 1;
            } else {
                end = true;
            }
            }

            if(DEBUG == 1){
            console.log("-------------------------------------------------------------------------------------");
            console.log("Массив ширины персонажа : " + HEROarrayW);
            console.log("Массив высоты персонажа : " + HEROarrayH);
            }


            //Итого имеем - массивы ширины и высоты обоих объектов

        
        
        //Сравниваем массивы по принципу M1Y - M2Y , M1X - M2X


        var endCompare = false;

        var endOne = false;
        var endTwo = false;

        var Xone = 0;
        var Xtwo = 0;

        var WALLtouchX = false;
        var WALLtouchY = false;

        var intTouchX = 0;
        var intTouchY = 0;
        

        //Вторичный цикл M1X - M2X

        while(endOne == false){
        if(WALLarrayW[Xone] == HEROarrayW[Xtwo]){
        WALLtouchX = true;
        endOne = true
        if(DEBUG == 1){
        console.log("Касание блока по X было обнаруженно");
        }
        intTouchX = Xone;
        continue;
        } else {
            Xone = Xone + 1;
        }

        if(Xtwo >= HEROarrayW.length){
            Xone = 0;
            Xtwo = 0;
            endOne = true;
            if(DEBUG == 1){
            console.log("Касание блока по X не было обнаруженно");
            }
            continue;
        }
        if(Xone >= WALLarrayW.length){
            Xone = 0;
            Xtwo = Xtwo + 1;
        }
        

        }


        //Вторичный цикл M1Y - M2Y
        Xone = 0;
        Xtwo = 0;

        while(endTwo == false){
        if(WALLarrayH[Xone] == HEROarrayH[Xtwo]){
        WALLtouchY = true;
        endTwo = true;
        if(DEBUG == 1){
        console.log("Касание блока по Y было обнаруженно");
        }
        intTouchY = Xone;
        continue;
        } else {
            Xone = Xone + 1;
        }

        if(Xtwo >= HEROarrayH.length){
            Xone = 0;
            Xtwo = 0;
            endTwo = true;
            if(DEBUG == 1){
            console.log("Касание блока по Y не было обнаруженно");
            }
            continue;
        }
        if(Xone >= WALLarrayH.length){
            Xone = 0;
            Xtwo = Xtwo + 1;
        }
        

        }

        
        //Если подтверженно касание по X и Y совершаем ACTIONTYPE

        if(DEBUG == 1){}
        console.log("");
        console.log("Х в точке : " + intTouchX);
        console.log("Y в точке : " + intTouchY);
        


        //Главный лог. блок
        if(WALLtouchX == true && WALLtouchY == true){

        
        if(ACTIONTYPE == 1){

        var NowPosX = 0;
        var NowPosY = 0;
            

        var FindSideW = WALLmaxW / 2 ;
        var FindSideH = WALLmaxH / 2 ;

        if(intTouchX > FindSideW){
        if(DEBUG == 1){
        console.log("Выталкнуть вправо");
        }

        DATA = document.getElementById(HERO).style.left;
        NowPosX = parseInt(DATA);
        document.getElementById(HERO).style.left = NowPosX + 1 + "px";
        
        

        } else if(intTouchX < FindSideW){
        if(DEBUG == 1){
        console.log("Выталкнуть влево");
        }

        DATA = document.getElementById(HERO).style.left;
        NowPosX = parseInt(DATA);
        document.getElementById(HERO).style.left = NowPosX - 1 + "px";

        }
        
        
        if(intTouchY < FindSideH){
        if(DEBUG == 1){
        console.log("Выталкнуть вверх");
        }

        DATA = document.getElementById(HERO).style.top;
        NowPosY = parseInt(DATA);
        document.getElementById(HERO).style.top = NowPosY - 1 + "px";

        } else if(intTouchY > FindSideH){
        if(DEBUG == 1){
        console.log("Выталкнуть вниз");
        }

        DATA = document.getElementById(HERO).style.top;
        NowPosY = parseInt(DATA);
        document.getElementById(HERO).style.top = NowPosY + 1 + "px";
        }






        }
        }
        //конец функции
    }
    
    
    

    
    function HEROmoveLOGIC(side){
    var DATAmove;
        //1 - up
        //2 - down
        //3 - left
        //4 - right
    if(side == 1){
    DATAmove = document.getElementById("TWO").style.top;
    var HERODATA = parseInt(DATAmove);
    document.getElementById("TWO").style.top = HERODATA - 1 + "px";
    }
    if(side == 2){
    DATAmove = document.getElementById("TWO").style.top;
    var HERODATA = parseInt(DATAmove);
    document.getElementById("TWO").style.top = HERODATA + 1 + "px";
    }
    if(side == 3){
    DATAmove = document.getElementById("TWO").style.left;
    var HERODATA = parseInt(DATAmove);
    document.getElementById("TWO").style.left = HERODATA - 1 + "px";
    }
    if(side == 4){
    DATAmove = document.getElementById("TWO").style.left;
    var HERODATA = parseInt(DATAmove);
    document.getElementById("TWO").style.left = HERODATA + 1 + "px";
    }
    }

    var idRIGHT;
    var idLEFT;
    var idDOWN;
    var idUP;

    function HEROmove(side){

        if(side == 1){
        idUP = setInterval("HEROmoveLOGIC(1)",10);
        }
        if(side == 2){
        idDOWN = setInterval("HEROmoveLOGIC(2)",10);
        }
        if(side == 3){
        idLEFT = setInterval("HEROmoveLOGIC(3)",10);
        }
        if(side == 4){
        idRIGHT = setInterval("HEROmoveLOGIC(4)",10);
        }

        if(side == 5){
        clearInterval(idRIGHT);
        clearInterval(idLEFT);
        clearInterval(idDOWN);
        clearInterval(idUP);
        }
    }


    
    setInterval('HitboxLogicCreator("ONE","TWO",1,0)',100);
    
    //setInterval("HEROmoveLOGIC(2)",10);
    


</script>
</body>




</html>